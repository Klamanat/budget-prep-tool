<div>
    <div
        class="w-full flex items-center justify-between h-auto min-h-[64px] px-2 sm:px-4 md:px-8 shadow-sm bg-gradient-to-r from-[#00A6E6] to-[#007BAA]">
        <div class="flex items-center gap-4 min-w-0">
            <img src="assets/images/ktb_logo.png" alt="Logo" class="h-10 w-auto sm:h-14" />
            <span class="text-white font-bold text-sm sm:text-lg md:text-xl whitespace-nowrap truncate">Budget Prep.
                Tool</span>
        </div>
        <div class="flex items-center gap-2 sm:gap-3 min-w-0">
            <div class="hidden sm:flex items-center gap-1 bg-white/10 border border-white/30 rounded px-2 py-1">
                <button class="text-white text-base px-1">−</button>
                <span class="text-white text-xs">ก<span class="text-xl">ก</span></span>
                <button class="text-white text-base px-1">+</button>
            </div>
            <button class="relative text-white p-2 hover:bg-white/20 rounded">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                </svg>
            </button>
            <span
                class="hidden sm:inline text-white text-xs truncate max-w-[90px] sm:max-w-[160px] md:max-w-none text-right">(รหัส123456) ชื่อ นามสกุล |  (รหัส123456)  แผนก/ฝ่าย  </span>
            <!-- ปุ่มออกจากระบบ: แสดงเป็นไอคอนบน mobile, เป็นปุ่มบนจอใหญ่ -->
            <button class="sm:hidden text-white p-2 hover:bg-white/20 rounded" title="ออกจากระบบ">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H7a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1" />
                </svg>
            </button>
            <button
                class="hidden border border-white text-white rounded px-2 py-1 text-xs hover:bg-white/10 transition sm:flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H7a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1" />
                </svg>
                ออกจากระบบ
            </button>
        </div>
    </div>
    <div class="h-10 py-1 px-6 shadow-sm flex gap-1 menu-bar">
        <!-- Hamburger button for mobile -->
        <button class="hamburger" (click)="toggleMobileMenu()">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>
        <div class="fixed inset-0 bg-opacity-30 z-40 md:hidden" *ngIf="mobileMenuOpen" (click)="toggleMobileMenu()">
        </div>
        <div class="w-full md:w-auto flex-col md:flex-row flex gap-2 md:gap-1 absolute md:static left-0 top-12 bg-white md:bg-transparent rounded-lg md:rounded-none shadow-lg md:shadow-none z-50 md:z-auto px-2 md:px-0 py-2 md:py-0"
                        [ngClass]="{
                            'flex': mobileMenuOpen || !screenIsMobile(),
                            'hidden': !mobileMenuOpen && screenIsMobile(),
                            'flex-col absolute left-0 top-12 bg-white rounded-lg shadow-lg z-50 px-2 py-2': screenIsMobile(),
                            'flex-row static bg-transparent rounded-none shadow-none z-auto px-0 py-0': !screenIsMobile()
                        }">
            <div *ngFor="let item of menuItems; let i = index" class="relative w-full md:w-auto">
                <button type="button" tabindex="0" role="button"
                    class="w-full md:w-auto flex items-center justify-between md:justify-start px-4 py-3 md:px-2 md:py-1 text-base md:text-sm font-medium rounded-lg md:rounded-none transition-colors duration-150 hover:bg-gray-100 md:hover:bg-gray-200 focus:bg-gray-200 outline-none"
                    (click)="toggleDropdown(i)">
                    <!-- Icon before menu title -->
                    <svg class="mr-2 h-5 w-5 md:h-4 md:w-4 text-blue-500 flex-shrink-0 opacity-60 md:opacity-100"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                        stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M4.5 6.75h3v3h-3v-3zm0 7.5h3v3h-3v-3zm7.5-7.5h3v3h-3v-3zm0 7.5h3v3h-3v-3z" />
                    </svg>
                    <span class="text-sm font-normal cursor-pointer">{{ item.title }}</span>
                    <svg *ngIf="openDropdownIndex !== i" xmlns="http://www.w3.org/2000/svg"
                        class="ml-2 h-5 w-5 md:h-4 md:w-4 text-gray-500" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                    <svg *ngIf="openDropdownIndex === i" xmlns="http://www.w3.org/2000/svg"
                        class="ml-2 h-5 w-5 md:h-4 md:w-4 text-gray-500" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
                    </svg>
                </button>
                <ul *ngIf="openDropdownIndex === i"
                    class="block md:absolute md:left-0 md:top-full md:min-w-[10rem] md:bg-white md:shadow-lg md:rounded-lg md:border md:border-gray-200 md:mt-1 md:z-50 md:py-2 md:px-0 px-4 py-2 space-y-1">
                    <li><a href="#" (click)="mobileMenuOpen = false; openDropdownIndex = null"
                            class="block w-full text-left px-4 py-2 rounded-lg hover:bg-gray-100 text-base md:text-sm">submenu1</a>
                    </li>
                    <li><a href="#" (click)="mobileMenuOpen = false; openDropdownIndex = null"
                            class="block w-full text-left px-4 py-2 rounded-lg hover:bg-gray-100 text-base md:text-sm">submenu2</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<router-outlet />