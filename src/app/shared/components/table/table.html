<table class="table w-full">
  <thead>
    <tr class="h-12 text-blue-100 cursor-pointer text-center">
      @if(selectionType) {
      <th class="bg-blue-400 border border-blue-300 py-1 px-3 w-12">
        <app-checkbox #chkAll [(ngModel)]="allSelectedValue" (checkedChange)="toggleAll($event)"
          class="w-3.5 h-3.5"></app-checkbox>
      </th>
      }

      <th *ngFor="let header of headers" class="bg-blue-400 border border-blue-300 py-1 px-3"
        [attr.width]="header?.width">
        {{ header?.title }}
      </th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let row of data" class="h-[40px] hover:bg-blue-100 cursor-pointer text-gray-700">
      @if(selectionType) {
      <td class="border border-blue-300 px-3 py-0 text-center">
        @if(selectionType === 'checkbox') {
        <app-checkbox [(ngModel)]="row.selected" (checkedChange)="onSelectionChange(row)"
          class="w-3.5 h-3.5"></app-checkbox>
        }
        @if(selectionType === 'radio') {
        <input type="radio" name="rowSelection" [(ngModel)]="selectedRow" [value]="row"
          (change)="onSelectionChange(row)" class="w-3.5 h-3.5" />
        }
      </td>
      }

      <td *ngFor="let header of headers" class="border border-blue-300 px-3 py-0 text-center"
        [ngClass]="header?.align ? 'text-' + header.align : ''">
        <ng-container *ngIf="header.slot; then templateBlock; else defaultBlock"></ng-container>

        <ng-template #templateBlock>
          <ng-container [ngTemplateOutlet]="header.slot" [ngTemplateOutletContext]="{ $implicit: row }"></ng-container>
        </ng-template>

        <ng-template #defaultBlock>
          {{ header?.key ? row[header.key] : '' }}
        </ng-template>
      </td>
    </tr>
  </tbody>
</table>

<!-- Pagination -->
<div *ngIf="totalItems" class="py-4 flex flex-col md:flex-row justify-between items-center gap-2">
  <p class="text-gray-700 text-sm font-normal">รายการทั้งหมด {{ totalItems }} รายการ</p>

  <div class="flex justify-center items-center">
    <div class="join gap-2">
      <!-- ไปหน้าแรก << -->
      <button class="join-item btn btn-sm" (click)="goToFirst()">&lt;&lt;</button>

      <!-- ย้อนกลับ < -->
      <button class="join-item btn btn-sm" (click)="goToPrev()">&lt;</button>

      <!-- current page -->
      <button class="join-item btn btn-sm">{{ currentPage }}</button>

      <!-- ถัดไป > -->
      <button class="join-item btn btn-sm" (click)="goToNext()">&gt;</button>

      <!-- ไปหน้าสุดท้าย >> -->
      <button class="join-item btn btn-sm" (click)="goToLast()">&gt;&gt;</button>
    </div>
  </div>

  <div class="flex items-center gap-2">
    <p class="text-gray-700 text-sm font-normal">แสดง</p>
    <select class="select select-sm" (change)="onPageSizeChange($event)">
      <option *ngFor="let size of pageSizeOptions" [value]="size">{{ size }}</option>
    </select>
  </div>
</div>

<!-- Empty state -->
<div *ngIf="!totalItems || data.length === 0" class="h-80 flex flex-col justify-center items-center text-gray-400">
  <div class="flex items-center gap-2">
    <app-icon name="circle" size="24"></app-icon>
    <span>ยังไม่มีรายการ</span>
  </div>
</div>